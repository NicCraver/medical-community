(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2646610c"],{3261:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"OperationalTag"},[t("ProLayout",{attrs:{mainBgColor:"#F5F5F5",padding:"0"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("新增")]},proxy:!0},{key:"main",fn:function(){return[t("ProList",{staticClass:"ProList",attrs:{pageParams:e.pageParams,total:e.total,onInquire:e.onInquire},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-input",{attrs:{placeholder:"名称",clearable:""},model:{value:e.queryParams.activityDesc,callback:function(t){e.$set(e.queryParams,"activityDesc",t)},expression:"queryParams.activityDesc"}}),t("el-select",{attrs:{placeholder:"活动类型",clearable:"",filterable:""},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"状态",clearable:"",filterable:""},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1),t("el-date-picker",{staticStyle:{width:"420px"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"创建开始日期","end-placeholder":"创建结束日期","range-separator":"至",clearable:!0,"default-time":e.defaultTime},on:{change:e.searchTimeChange,focus:e.setDefaultTime},model:{value:e.addDate,callback:function(t){e.addDate=t},expression:"addDate"}})]},proxy:!0},{key:"actions",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onInquire()}}},[e._v("搜索")]),t("el-button",{on:{click:e.resetQueryParams}},[e._v("重置")])]},proxy:!0},{key:"batchActions",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("创建活动")])]},proxy:!0}])},[t("el-table",{directives:[{name:"adaptive",rawName:"v-adaptive",value:{bottomOffset:60},expression:"{ bottomOffset: 60 }"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTable",attrs:{height:"100px","row-key":"id",data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"40","reserve-selection":!0}}),t("el-table-column",{attrs:{label:"序号",type:"seq",width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.seq))])]}}])}),t("el-table-column",{attrs:{label:"活动ID",prop:"activityCode"}}),t("el-table-column",{attrs:{label:"活动类型",prop:"typeDesc"}}),t("el-table-column",{attrs:{label:"活动状态",prop:"statusDesc"}}),t("el-table-column",{attrs:{label:"活动名称",prop:"activityDesc"}}),t("el-table-column",{attrs:{label:"活动详情",prop:"activityDetail","min-width":"250"}}),t("el-table-column",{attrs:{label:"活动产品","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(a){return["645064ff90374668b3799ee428125536"==a.row.productType?t("span",[t("span",{on:{mouseover:function(t){return e.changeEnter(a.row,t)},mouseleave:e.changeLeave}},[e._v("礼包 "),t("IconSvg",{attrs:{iconClass:"info",width:"15",height:"15"}})],1)]):t("span",[a.row.productDescs&&a.row.productDescs.length>0?t("span",e._l(a.row.productDescs,(function(a,s){return t("span",{key:s},[e._v(" "+e._s(a)+" ")])})),0):e._e()])]}}])}),t("el-table-column",{attrs:{label:"总数",prop:"maxNum"}}),t("el-table-column",{attrs:{label:"活动起止时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.startDate)+"至"+e._s(t.row.endDate)+" ")]}}])}),t("el-table-column",{attrs:{label:"创建人",prop:"createUserName"}}),t("el-table-column",{attrs:{label:"创建机构",prop:"orgDesc"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"createDate"}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",width:"220"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a)}}},[e._v("详情")]),"进行中"==a.statusDesc||"待开始"==a.statusDesc?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]):e._e(),"进行中"==a.statusDesc||"已结束"==a.statusDesc||"已关闭"==a.statusDesc?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleData(a)}}},[e._v("数据")]):e._e(),"进行中"==a.statusDesc||"待开始"==a.statusDesc?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleClose(a)}}},[e._v("关闭")]):e._e()]}}])})],1)],1)]},proxy:!0}])}),t("ProDialog",{attrs:{visible:e.dialogReasonClose,title:"关闭活动原因",width:"520px","before-close":e.handleResetClose,"close-on-click-modal":!1,top:"20vh"},on:{"update:visible":function(t){e.dialogReasonClose=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:function(t){e.dialogReasonClose=!1}}},[e._v("取消")]),t("el-button",{on:{click:e.sumbitClose}},[e._v("确认")])]},proxy:!0}])},[t("div",{staticClass:"mainbox"},[t("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"75px"}},[t("el-form-item",{attrs:{label:"劵有效期"}},[t("el-radio-group",{model:{value:e.actiCloseParams.reasonCode,callback:function(t){e.$set(e.actiCloseParams,"reasonCode",t)},expression:"actiCloseParams.reasonCode"}},[t("el-radio",{attrs:{label:"1"}},[e._v("活动取消")]),t("el-radio",{attrs:{label:"2"}},[e._v("原因二")]),t("el-radio",{attrs:{label:"3"}},[e._v("其它")])],1),"3"==e.actiCloseParams.reasonCode?t("el-input",{staticStyle:{width:"120px","margin-left":"12px"},attrs:{type:"text"},model:{value:e.actiCloseParams.reason,callback:function(t){e.$set(e.actiCloseParams,"reason",t)},expression:"actiCloseParams.reason"}}):e._e(),t("p",{staticClass:"warin"},[t("IconSvg",{attrs:{iconClass:"tip",width:"15",height:"15"}}),e._v(" 活动关闭后，活动将不再展示。活动产品在有效期内仍可使用。 ")],1)],1)],1)],1)]),e.isShowHidden?t("div",{staticClass:"serviceStyle",style:e.stylePosition},[e.serviceList&&e.serviceList.length>0?t("ul",e._l(e.serviceList,(function(a,s){return t("li",{key:s},[e._v(" "+e._s(a)+" ")])})),0):e._e()]):e._e()],1)},l=[],o=(a("14d9"),a("a211")),i={components:{ProList:o["ProList"],ProLayout:o["ProLayout"],ProDialog:o["ProDialog"],IconSvg:o["IconSvg"]},data(){return{statusList:[{label:"待开始",value:"WAIT"},{label:"进行中",value:"IN_PROGRESS"},{label:"已结束",value:"END"},{label:"已关闭",value:"CLOSE"}],typeList:[],addDate:[],loading:!1,tableData:[],queryParams:{},pageParams:{pageNum:1,pageSize:10},defaultTime:[],total:0,multipleSelection:[],dialogReasonClose:!1,actiCloseParams:{reasonCode:"1"},activiCloseId:"",serviceList:[],isShowHidden:!1,stylePosition:{position:"fixed",zIndex:999,left:"0",top:"0"}}},created(){this.selectData()},mounted(){this.onInquire()},methods:{setDefaultTime(){this.defaultTime=["00:00:00","23:59:59"]},changeEnter(e,t){this.isShowHidden=!0,this.serviceList=e.productDescs,this.$nextTick(()=>{this.stylePosition.left=t.pageX+20+"px",this.stylePosition.top=t.pageY-10+"px",this.$forceUpdate()})},changeLeave(){this.isShowHidden=!1},handleResetClose(){this.dialogReasonClose=!1},searchTimeChange(e){e?e[0]&&e[1]&&(this.queryParams.createDateS=e[0],this.queryParams.createDateE=e[1]):(this.addDate=[],this.queryParams.createDateS="",this.queryParams.createDateE="")},handleSelectionChange(e){this.multipleSelection=e},async selectData(){},async onInquire(){},handleAdd(){this.$router.push({name:"ActivityAdd",query:{status:"add"}})},handleDetail(e){this.$router.push({name:"ActivityAdd",query:{status:"etails",activityId:e.id,activityPro:e.statusDesc}})},handleEdit(e){this.$router.push({name:"ActivityAdd",query:{status:"edit",activityId:e.id,activityPro:e.statusDesc}})},handleData(e){this.$router.push({name:"ActivityAdd",query:{status:"dataInfo",activityId:e.id,activityPro:e.statusDesc}})},handleClose(e){this.activiCloseId=e.id,this.dialogReasonClose=!0},async sumbitClose(){},handleCopy(e){},resetQueryParams(){this.queryParams={},this.pageParams={pageSize:10,pageNum:1},this.addDate=[],this.onInquire()}},filters:{}},r=i,n=(a("a734"),a("2877")),c=Object(n["a"])(r,s,l,!1,null,"3d637452",null);t["default"]=c.exports},7339:function(e,t,a){},a734:function(e,t,a){"use strict";a("7339")}}]);